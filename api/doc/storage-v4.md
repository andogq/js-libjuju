<!---
NOTE: this file has been generated by the doc command in js-libjuju
on Fri 2018/11/09 14:32:38 UTC. Do not manually edit this file.
--->
# Storage v4

APIv4 implements the storage v4 API.
This API facade is available on model connections.

To include StorageV4 capabilities in your client, load it as
part of your facades, for instance:
```javascript
const {conn, logout} = await jujulib.connectAndLogin(url, credentials, {
  facades: [require('jujulib/api/facades/storage-v4')]
});
```
Facade methods at then accessible at `conn.facades.storage`.

Go back to [index](index.md).

## Methods
- [addToUnit](#addToUnitargs-callback)
- [attach](#attachargs-callback)
- [createPool](#createPoolargs-callback)
- [detach](#detachargs-callback)
- [import](#importargs-callback)
- [listFilesystems](#listFilesystemsargs-callback)
- [listPools](#listPoolsargs-callback)
- [listStorageDetails](#listStorageDetailsargs-callback)
- [listVolumes](#listVolumesargs-callback)
- [remove](#removeargs-callback)
- [storageDetails](#storageDetailsargs-callback)

## addToUnit(args, callback)
AddToUnit validates and creates additional storage instances for units. A
    "CHANGE" block can block this operation.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  storages: []{
    unit: string,
    name: string,
    storage: {
      pool: string,
      size: int,
      count: int
    }
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      storageTags: []string
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## attach(args, callback)
Attach attaches existing storage instances to units. A "CHANGE" block can
    block this operation.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  ids: []{
    storageTag: string,
    unitTag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## createPool(args, callback)
CreatePool creates a new pool with specified parameters.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  name: string,
  provider: string,
  attrs: map[string]anything
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error or null if the operation succeeded.
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## detach(args, callback)
Detach sets the specified storage attachments to Dying, unless they are
    already Dying or Dead. Any associated, persistent storage will remain
    alive.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  ids: []{
    storageTag: string,
    unitTag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## import(args, callback)
Import imports existing storage into the model. A "CHANGE" block can block
    this operation.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  storage: []{
    kind: int,
    pool: string,
    providerId: string,
    storageName: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      storageTag: string
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## listFilesystems(args, callback)
ListFilesystems returns a list of filesystems in the environment matching
    the provided filter. Each result describes a filesystem in detail,
    including the filesystem's attachments.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  filters: []{
    machines: []string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: []{
      filesystemTag: string,
      volumeTag: string,
      info: {
        filesystemId: string,
        pool: string,
        size: int
      },
      life: string,
      status: {
        status: string,
        info: string,
        data: map[string]anything,
        since: time
      },
      machineAttachments: map[string]{
        filesystemattachmentinfo: {
          mountPoint: string,
          readOnly: bool
        },
        life: string
      },
      unitAttachments: map[string]{
        filesystemattachmentinfo: {
          mountPoint: string,
          readOnly: bool
        },
        life: string
      },
      storage: {
        storageTag: string,
        ownerTag: string,
        kind: int,
        status: {
          status: string,
          info: string,
          data: map[string]anything,
          since: time
        },
        life: string,
        persistent: bool,
        attachments: map[string]{
          storageTag: string,
          unitTag: string,
          machineTag: string,
          location: string,
          life: string
        }
      }
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## listPools(args, callback)
ListPools returns a list of pools. If filter is provided, returned list
    only contains pools that match the filter. Pools can be filtered on
    names and provider types. If both names and types are provided as
    filter, pools that match either are returned. This method lists union
    of pools and environment provider types. If no filter is provided, all
    pools are returned.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  filters: []{
    names: []string,
    providers: []string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    storagePools: []{
      name: string,
      provider: string,
      attrs: map[string]anything
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## listStorageDetails(args, callback)
ListStorageDetails returns storage matching a filter.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  filters: []<object>
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: []{
      storageTag: string,
      ownerTag: string,
      kind: int,
      status: {
        status: string,
        info: string,
        data: map[string]anything,
        since: time
      },
      life: string,
      persistent: bool,
      attachments: map[string]{
        storageTag: string,
        unitTag: string,
        machineTag: string,
        location: string,
        life: string
      }
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## listVolumes(args, callback)
ListVolumes lists volumes with the given filters. Each filter produces an
    independent list of volumes, or an error if the filter is invalid or
    the volumes could not be listed.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  filters: []{
    machines: []string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: []{
      volumeTag: string,
      info: {
        volumeId: string,
        hardwareId: string,
        wwn: string,
        pool: string,
        size: int,
        persistent: bool
      },
      life: string,
      status: {
        status: string,
        info: string,
        data: map[string]anything,
        since: time
      },
      machineAttachments: map[string]{
        volumeattachmentinfo: {
          deviceName: string,
          deviceLink: string,
          busAddress: string,
          readOnly: bool,
          planInfo: {
            deviceType: string,
            deviceAttributes: map[string]string
          }
        },
        life: string
      },
      unitAttachments: map[string]{
        volumeattachmentinfo: {
          deviceName: string,
          deviceLink: string,
          busAddress: string,
          readOnly: bool,
          planInfo: {
            deviceType: string,
            deviceAttributes: map[string]string
          }
        },
        life: string
      },
      storage: {
        storageTag: string,
        ownerTag: string,
        kind: int,
        status: {
          status: string,
          info: string,
          data: map[string]anything,
          since: time
        },
        life: string,
        persistent: bool,
        attachments: map[string]{
          storageTag: string,
          unitTag: string,
          machineTag: string,
          location: string,
          life: string
        }
      }
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## remove(args, callback)
Remove sets the specified storage entities to Dying, unless they are
    already Dying or Dead, such that the storage will eventually be removed
    from the model. If the arguments specify that the storage should be
    destroyed, then the associated cloud storage will be destroyed first;
    otherwise it will only be released from Juju's control.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  storage: []{
    tag: string,
    destroyAttachments: bool,
    destroyStorage: bool
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## storageDetails(args, callback)
StorageDetails retrieves and returns detailed information about desired
    storage identified by supplied tags. If specified storage cannot be
    retrieved, individual error is returned instead of storage information.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  entities: []{
    tag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      storageTag: string,
      ownerTag: string,
      kind: int,
      status: {
        status: string,
        info: string,
        data: map[string]anything,
        since: time
      },
      life: string,
      persistent: bool,
      attachments: map[string]{
        storageTag: string,
        unitTag: string,
        machineTag: string,
        location: string,
        life: string
      }
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.