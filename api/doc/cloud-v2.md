<!---
NOTE: this file has been generated by the doc command in js-libjuju
on Fri 2018/11/09 14:32:38 UTC. Do not manually edit this file.
--->
# Cloud v2

CloudAPIV2 provides a way to wrap the different calls between version 2 and
  version 3 of the cloud API.
This API facade is available on controller connections.

To include CloudV2 capabilities in your client, load it as
part of your facades, for instance:
```javascript
const {conn, logout} = await jujulib.connectAndLogin(url, credentials, {
  facades: [require('jujulib/api/facades/cloud-v2')]
});
```
Facade methods at then accessible at `conn.facades.cloud`.

Go back to [index](index.md).

## Methods
- [addCloud](#addCloudargs-callback)
- [addCredentials](#addCredentialsargs-callback)
- [cloud](#cloudargs-callback)
- [cloudInfo](#cloudInfoargs-callback)
- [clouds](#cloudscallback)
- [credential](#credentialargs-callback)
- [credentialContents](#credentialContentsargs-callback)
- [defaultCloud](#defaultCloudcallback)
- [instanceTypes](#instanceTypesargs-callback)
- [listCloudInfo](#listCloudInfoargs-callback)
- [modifyCloudAccess](#modifyCloudAccessargs-callback)
- [removeClouds](#removeCloudsargs-callback)
- [revokeCredentials](#revokeCredentialsargs-callback)
- [updateCredentials](#updateCredentialsargs-callback)
- [updateCredentialsCheckModels](#updateCredentialsCheckModelsargs-callback)
- [userCredentials](#userCredentialsargs-callback)

## addCloud(args, callback)
AddCloud adds a new cloud, different from the one managed by the
    controller.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  cloud: {
    type: string,
    authTypes: []string,
    endpoint: string,
    identityEndpoint: string,
    storageEndpoint: string,
    regions: []{
      name: string,
      endpoint: string,
      identityEndpoint: string,
      storageEndpoint: string
    },
    caCertificates: []string
  },
  name: string
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error or null if the operation succeeded.
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## addCredentials(args, callback)
AddCredentials adds new credentials. In contrast to UpdateCredentials()
    below, the new credentials can be for a cloud that the controller does
    not manage (this is required for CAAS models)

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  credentials: []{
    tag: string,
    credential: {
      authType: string,
      attrs: map[string]string,
      redacted: []string
    }
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## cloud(args, callback)
Cloud returns the cloud definitions for the specified clouds.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  entities: []{
    tag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    cloud: {
      type: string,
      authTypes: []string,
      endpoint: string,
      identityEndpoint: string,
      storageEndpoint: string,
      regions: []{
        name: string,
        endpoint: string,
        identityEndpoint: string,
        storageEndpoint: string
      },
      caCertificates: []string
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## cloudInfo(args, callback)
CloudInfo returns information about the specified clouds.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  entities: []{
    tag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      clouddetails: {
        type: string,
        authTypes: []string,
        endpoint: string,
        identityEndpoint: string,
        storageEndpoint: string,
        regions: []{
          name: string,
          endpoint: string,
          identityEndpoint: string,
          storageEndpoint: string
        }
      },
      users: []{
        user: string,
        displayName: string,
        access: string
      }
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## clouds(callback)
Clouds returns the definitions of all clouds supported by the controller
    that the logged in user can see.

- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  clouds: map[string]{
    type: string,
    authTypes: []string,
    endpoint: string,
    identityEndpoint: string,
    storageEndpoint: string,
    regions: []{
      name: string,
      endpoint: string,
      identityEndpoint: string,
      storageEndpoint: string
    },
    caCertificates: []string
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## credential(args, callback)
Credential returns the specified cloud credential for each tag, minus
    secrets.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  entities: []{
    tag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      authType: string,
      attrs: map[string]string,
      redacted: []string
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## credentialContents(args, callback)
CredentialContents returns the specified cloud credentials, including the
    secrets if requested. If no specific credential name/cloud was passed
    in, all credentials for this user are returned. Only credential owner
    can see its contents as well as what models use it. Controller admin
    has no special superpowers here and is treated the same as all other
    users.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  credentials: []{
    cloudName: string,
    credentialName: string
  },
  includeSecrets: bool
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      content: {
        name: string,
        cloud: string,
        authType: string,
        attrs: map[string]string
      },
      models: []{
        model: string,
        access: string
      }
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## defaultCloud(callback)
DefaultCloud returns the tag of the cloud that models will be created in by
    default.

- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  error: {
    message: string,
    code: string,
    info: {
      macaroon: anything,
      macaroonPath: string
    }
  },
  result: string
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## instanceTypes(args, callback)
InstanceTypes returns instance type information for the cloud and region in
    which the current model is deployed.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  constraints: []{
    cloudTag: string,
    region: string,
    constraints: {
      arch: string,
      container: string,
      cores: int,
      cpuPower: int,
      mem: int,
      rootDisk: int,
      tags: []string,
      instanceType: string,
      spaces: []string,
      virtType: string
    }
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    instanceTypes: []{
      name: string,
      arches: []string,
      cpuCores: int,
      memory: int,
      rootDisk: int,
      virtType: string,
      deprecated: bool,
      cost: int
    },
    costUnit: string,
    costCurrency: string,
    costDivisor: int,
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## listCloudInfo(args, callback)
ListCloudInfo returns clouds that the specified user has access to.
    Controller admins (superuser) can list clouds for any user. Other users
    can only ask about their own clouds.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  userTag: string,
  all: bool
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    result: {
      clouddetails: {
        type: string,
        authTypes: []string,
        endpoint: string,
        identityEndpoint: string,
        storageEndpoint: string,
        regions: []{
          name: string,
          endpoint: string,
          identityEndpoint: string,
          storageEndpoint: string
        }
      },
      userAccess: string
    },
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## modifyCloudAccess(args, callback)
ModifyCloudAccess changes the model access granted to users.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  changes: []{
    userTag: string,
    cloudTag: string,
    action: string,
    access: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## removeClouds(args, callback)
RemoveClouds removes the specified clouds from the controller. If a cloud
    is in use (has models deployed to it), the removal will fail.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  entities: []{
    tag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## revokeCredentials(args, callback)
RevokeCredentials revokes a set of cloud credentials.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  entities: []{
    tag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## updateCredentials(args, callback)
UpdateCredentials updates a set of cloud credentials' content.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  credentials: []{
    tag: string,
    credential: {
      authType: string,
      attrs: map[string]string,
      redacted: []string
    }
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## updateCredentialsCheckModels(args, callback)
UpdateCredentialsCheckModels updates a set of cloud credentials' content.
    If there are any models that are using a credential and these models
    are not going to be visible with updated credential content, there will
    be detailed validation errors per model. Controller admins can 'force'
    an update of the credential regardless of whether it is deemed valid or
    not.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  credentials: []{
    tag: string,
    credential: {
      authType: string,
      attrs: map[string]string,
      redacted: []string
    }
  },
  force: bool
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    tag: string,
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    },
    models: []{
      uuid: string,
      name: string,
      errors: []{
        error: {
          message: string,
          code: string,
          info: {
            macaroon: anything,
            macaroonPath: string
          }
        }
      }
    }
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.

## userCredentials(args, callback)
UserCredentials returns the cloud credentials for a set of users.

- *@param {Object} args* Arguments to be provided to Juju, as an object like
  the following:
```javascript
{
  userClouds: []{
    userTag: string,
    cloudTag: string
  }
}
```
- *@param {Function} callback* Called when the response from Juju is available,
  the callback receives an error and the result. If there are no errors, the
  result is provided as an object like the following:
```javascript
{
  results: []{
    error: {
      message: string,
      code: string,
      info: {
        macaroon: anything,
        macaroonPath: string
      }
    },
    result: []string
  }
}
```
- *@returns {Promise}* Rejected or resolved with the values normally passed to
  the callback when the callback is not provided.
  This allows this method to be awaited.